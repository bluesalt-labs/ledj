!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ledj",[],t):"object"==typeof exports?exports.ledj=t():e.ledj=t()}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var o=a[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,a){"use strict";a(1),a(2),a(3),a(4),a(5),a(6),a(7),a(8),a(9),a(10),a(11),a(12),a(13),a(14)},function(e,t,a){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"undefined"==typeof Ledj?e.Ledj=function(){function t(e,t){e.hasOwnProperty("config")&&e.hasOwnProperty("data")?(y.cache.curCacheID=y.cache.jsonConfig.push(e.config)-1,y.cache.jsonData[y.cache.curCacheID]=e.data,e.hasOwnProperty("url")&&(y.cache.jsonUrl[y.cache.curCacheID]=e.url),t(y.cache.curCacheID)):console.warn("Loaded data must have `config` and `data` properties.")}function a(e,a){y.getJSONConfig(e,function(n,o){if(null!==n)return console.warn('Config file "'+e+'" could not be retrieved. '+n),!1;o.url=e,t(o,a)})}function o(e,t){return y.dataObjectTypes.hasOwnProperty(t)?y.dataObjectTypes[t](e):e}function c(e,t){try{if(e[y.cache.sortBy.prop]&&t[y.cache.sortBy.prop]){y.cache.sortBy.prop&&y.cache.sortBy.type&&(e[y.cache.sortBy.prop]=o(e[y.cache.sortBy.prop],y.cache.sortBy.type),t[y.cache.sortBy.prop]=o(t[y.cache.sortBy.prop],y.cache.sortBy.type));var a="string"==typeof e[y.cache.sortBy.prop]?e[y.cache.sortBy.prop].toLowerCase():e[y.cache.sortBy.prop],n="string"==typeof t[y.cache.sortBy.prop]?t[y.cache.sortBy.prop].toLowerCase():t[y.cache.sortBy.prop];if(e[y.cache.sortBy.prop]!==t[y.cache.sortBy.prop])return"desc"===y.cache.sortDir?a>n?-1:1:a<n?-1:1}}catch(e){}return 0}function r(e){y.cache.sortBy=null;try{y.cache.jsonConfig[e].sortBy={prop:y.cache.jsonConfig[e].sortBy.prop,type:y.cache.jsonConfig[e].sortBy.type.toLowerCase()}}catch(t){try{"string"==typeof y.cache.jsonConfig[e].sortBy?y.cache.jsonConfig[e].sortBy={prop:y.cache.jsonConfig[e].sortBy,type:null}:Array.isArray(y.cache.jsonData[e].sortBy)&&y.cache.jsonData[e].sortBy.length>1?y.cache.jsonConfig[e].sortBy={prop:y.cache.jsonConfig[e].sortBy[0],type:y.cache.jsonConfig[e].sortBy[1].toLowerCase()}:"object"===n(y.cache.jsonConfig[e].sortBy)&&(y.cache.jsonData[e].sortBy={prop:Object.keys(y.cache.jsonData[e].sortBy)[0],type:y.cache.jsonData[e].sortBy[0].toLowerCase()})}catch(t){y.cache.jsonConfig[e].sortBy=null}}finally{y.cache.sortBy=y.cache.jsonConfig[e].sortBy}}function s(e){y.cache.jsonConfig[e].hasOwnProperty("sortDir")?(y.cache.sortDir=y.cache.jsonConfig[e].sortDir,"asc"===y.cache.jsonConfig[e].sortDir.toLowerCase()||0===y.cache.jsonConfig[e].sortDir?y.cache.sortDir="asc":"desc"===y.cache.jsonConfig[e].sortDir.toLowerCase()||1===y.cache.jsonConfig[e].sortDir?y.cache.sortDir="desc":(console.warn('Invalid sort direction "'+y.cache.jsonConfig[e].sortDir+'". Defaulting to "asc (0)".'),y.cache.jsonConfig[e].sortDir=y.defaults.sortDir)):y.cache.jsonConfig[e].sortDir=y.defaults.sortDir}function i(e){if(y.cache.jsonData[e]){if(r(e),null!==y.cache.sortBy)if(s(e),Array.isArray(y.cache.jsonData[e]))y.cache.jsonData[e]=y.cache.jsonData[e].sort(c);else if("object"===n(y.cache.jsonData[e]))for(var t in y.cache.jsonData[e])y.cache.jsonData[e][t].sort(c);else console.warn("Could not sort cache.jsonData["+e+"]")}else console.warn("from Ledj.sortJsonDataBy(): `cache.jsonData["+e+"]` does not exist.")}function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={cacheID:e,objectKey:t,itemHrefKey:"href",newTab:!0,itemImageKey:"filename",itemTitleKey:"title"};return u(y.templates.linkGrid(n),e,t,a)}function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={cacheID:e,objectKey:t};return u(y.templates.table(n),e,t,a)}function f(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={cacheID:e,objectKey:t};return u(y.templates.gifGrid(n),e,t,a)}function u(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return y.templates.parent({title:a?p(t,a):null,elementID:"ledj-container-"+t+(null!==n?"-"+n:""),childHTML:e})}function h(e,t){var a=document.getElementById(t);if(a){y.cache.elementID[e]=t;var o=null;switch(y.cache.jsonConfig[e].type.toLowerCase()){case"link-grid":case"linkgrid":o=l;break;case"table":o=d;break;case"gif-grid":case"gifgrid":o=f;break;default:console.log("A fallback template is not yet implemented.")}if(o){var c="";if(Array.isArray(y.cache.jsonData[e]))c=o(e);else if("object"===n(y.cache.jsonData[e])){var r="";if(Object.keys(y.cache.jsonData[e]).length>1){var s=0;for(var i in y.cache.jsonData[e])r+=o(e,i,s),s++;c=u(r,e)}else c=o(e,Object.keys(y.cache.jsonData[e])[0])}else console.warn("Couldn't find a template to use - Ledj shouldn't get here");""!==c&&(a.innerHTML+=c,y.cache.tagTemplateUsed&&(y.removeTagClickListeners(),y.addTagClickListeners()))}else console.warn("A template could not be identified.")}else console.warn("Element "+(t?"#"+t:"[undefined]")+" does not exist.")}function p(e,t){if(t&&""!==t){var a="h1";return y.cache.jsonConfig[e].hasOwnProperty("titleElementLevel")&&"number"==typeof parseInt(y.cache.jsonConfig[e].titleElementLevel)&&(a="h"+y.cache.jsonConfig[e].titleElementLevel),"<"+a+' class="ledj-title">'+t+"</"+a+">"}return null}function j(e){try{document.getElementById(e).innerHTML=""}catch(e){console.warn(e)}}function g(e,t){y.cache.tagTemplateUsed=!1,i(e),h(e,t)}var y={};return y.defaults={sortDir:"asc",selectMultipleTags:!0},y.cache={curCacheID:-1,jsonConfig:[],jsonData:[],jsonUrl:[],elementID:[],sortDir:y.defaults.sortDir,selectMultipleTags:y.defaults.selectMultipleTags,tagTemplateUsed:!1},y.dataObjectTypes={},y.templates={data:{}},y.urlExists=function(e,t,a,n){var o=new XMLHttpRequest;o.open("HEAD",e),o.onreadystatechange=function(){if(this.readyState===this.DONE)if(200===this.status){if(null===t)return 0;t(n)}else{if(null===a)return-1;a(n)}},o.send()},y.reset=function(e){j(y.cache.elementID[e])},y.getJSONConfig=function(e,t){if("string"==typeof e){e+="?dt="+Date.now();var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="json",a.onload=function(){var e=a.status;200===e?t(null,a.response):t(e)},a.send()}else t("[url] must be a string.")},y.getHostName=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")},y.capitalize=function(e){return"string"==typeof e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e},y.nameToID=function(e){return e.replace(/\\s/g,"-").toLowerCase()},y.toggleActiveTagsByClassName=function(e){var t=e.target.className.replace("tag","").replace("active","").trim();if(y.defaults.selectMultipleTags){var a=!0,n=!1,o=void 0;try{for(var c,r=document.getElementsByClassName(t)[Symbol.iterator]();!(a=(c=r.next()).done);a=!0){var s=c.value;s.className.includes("active")?s.className="tag "+t:s.className="tag active "+t}}catch(e){n=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}}else{var i=!0,l=!1,d=void 0;try{for(var f,u=document.getElementsByClassName("tag")[Symbol.iterator]();!(i=(f=u.next()).done);i=!0){var h=f.value,p=h.className.split(" ");p.includes(t)&&!p.includes("active")?h.className="tag active "+t:h.className=h.className.replace("active","").trim()}}catch(e){l=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(l)throw d}}}},y.addTagClickListeners=function(){var e=!0,t=!1,a=void 0;try{for(var n,o=document.getElementsByClassName("tag")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.addEventListener("click",y.toggleActiveTagsByClassName)}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}},y.removeTagClickListeners=function(){var e=!0,t=!1,a=void 0;try{for(var n,o=document.getElementsByClassName("tag")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.removeEventListener("click",y.toggleActiveTagsByClassName)}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}},y.getImageUrl=function(e,t,a){var n="/",o=y.cache.jsonConfig[t].hasOwnProperty("imgExt")?y.cache.jsonConfig[t].imgExt:"";return y.cache.jsonConfig[t].hasOwnProperty("srcDir")?n=y.cache.jsonConfig[t].srcDir:y.cache.jsonConfig[t].hasOwnProperty("srcDirs")&&(a&&y.cache.jsonConfig[t].srcDirs.hasOwnProperty(a)?n=y.cache.jsonConfig[t].srcDirs[a]:y.cache.jsonConfig[t].srcDirs.hasOwnProperty("Default")?n=y.cache.jsonConfig[t].srcDirs.Default:y.cache.jsonConfig[t].srcDirs.hasOwnProperty("default")&&(n=y.cache.jsonConfig[t].srcDirs.default)),n+e+o},y.getAssetUrl=function(e,t,a,n){var o="/",c=y.cache.jsonConfig[a].hasOwnProperty(e)?y.cache.jsonConfig[a][e]:"";return y.cache.jsonConfig[a].hasOwnProperty("srcDir")?o=y.cache.jsonConfig[a].srcDir:y.cache.jsonConfig[a].hasOwnProperty("srcDirs")&&(n&&y.cache.jsonConfig[a].srcDirs.hasOwnProperty(n)?o=y.cache.jsonConfig[a].srcDirs[n]:y.cache.jsonConfig[a].srcDirs.hasOwnProperty("Default")?o=y.cache.jsonConfig[a].srcDirs.Default:y.cache.jsonConfig[a].srcDirs.hasOwnProperty("default")&&(o=y.cache.jsonConfig[a].srcDirs.default)),o+t+c},y.addTemplate=function(e,t){y.templates[e]=t},y.addDataTemplate=function(e,t){y.templates.data[e]=t},y.setDataConvertType=function(e,t){y.dataObjectTypes[e]=t},y.addCacheConfigVar=function(e,t){y.defaults[e]=t},y.loadAndAttachTo=function(e,t){a(e,function(e){g(e,t)})},y.loadFromObjAndAttachTo=function(e,a){t(e,function(e){g(e,a)})},y.reloadFromUrlByID=function(e){var t=parseInt(e);"number"==typeof t&&this.cache.jsonUrl[t]&&this.cache.elementID[t]?(this.reset(t),this.loadAndAttachTo(this.cache.jsonUrl[t],this.cache.elementID[t])):console.log("Could not reload: cacheID "+e+" is invalid.")},y.reloadFromObjByID=function(e,t){var a=parseInt(t);"number"==typeof a&&this.cache.elementID[a]?(this.reset(a),this.loadFromObjAndAttachTo(e,this.cache.elementID[a])):console.log("Could not reload: cacheID "+t+" is invalid.")},y.attach=y.loadAndAttachTo,y.attachWith=y.loadFromObjAndAttachTo,y.reload=y.reloadFromUrlByID,y.reloadwith=y.reloadFromObjByID,y}():console.log("Ledj is already defined.")}(window)},function(e,t,a){"use strict";Ledj.addTemplate("gifGrid",function(e){return'<div class="ledj-gif-grid">\n'+(e.objectKey?Ledj.cache.jsonData[e.cacheID][e.objectKey]:Ledj.cache.jsonData[e.cacheID]).map(function(t,a){return'<div class="ledj-gif-item" id="ledj-gif-item-'+a+'">\n        <div class="ledj-gif-loading-overlay" id="ledj-gif-loading-overlay-'+a+'"></div>\n        <div class="ledj-gif-content" id="ledj-gif-content-'+a+'">\n            <a class="ledj-gif-title-link" href="'+Ledj.getImageUrl(t.filename,e.cacheID,e.objectKey)+'" target="_blank">'+t.title+"</a>\n            <hr />\n            "+(Ledj.cache.jsonData.hasOwnProperty("source")?"\x3c!-- Source: "+Ledj.cache.jsonData.source+" --\x3e":"")+'\n            <div class="ledj-gif-container">\n                <video id="ledj-video-'+a+'" autoplay="true" loop="true">\n                    <source src="'+Ledj.getAssetUrl("vidExt",t.filename,e.cacheID,e.objectKey)+'" type="video/mp4" />\n                    <img src="'+Ledj.getImageUrl(t.filename,e.cacheID,e.objectKey)+'" title="Your browser does not support the <video> tag." />\n                </video>\n            </div>\n        </div>\n    </div>'}).join("")+"\n</div>"})},function(e,t,a){"use strict";Ledj.addTemplate("linkGrid",function(e){return'<div class="ledj-link-grid">\n'+(e.objectKey?Ledj.cache.jsonData[e.cacheID][e.objectKey]:Ledj.cache.jsonData[e.cacheID]).map(function(t){return'<a class="link-grid-item" href="'+t[e.itemHrefKey]+'"'+(e.newTab?' target="_blank"':"")+'>\n        <img src="'+Ledj.getImageUrl(t[e.itemImageKey],e.cacheID,e.objectKey)+'" title="'+t[e.itemTitleKey]+'" />\n        <span>'+t[e.itemTitleKey]+"</span>\n    </a>"}).join("")+"\n</div>"})},function(e,t,a){"use strict";Ledj.addTemplate("parent",function(e){return'<div class="ledj-container" id="'+e.elementID+'">\n    '+(e.title?e.title:"")+"\n    "+e.childHTML+"\n</div>"})},function(e,t,a){"use strict";Ledj.getCellContent=function(e,t,a){var n="";switch(a[t]=a[t]?a[t]:"",e.type.toLowerCase()){case"url":n+=Ledj.templates.data.url({text:a[t],href:a[e.href]});break;case"image":n+=Ledj.templates.data.image({src:a[e.src],alt:a[e.alt]});break;case"date":var o=e.hasOwnProperty("dateFormat")?e.dateFormat:null;n+=Ledj.templates.data.date({date:a[t],dateFormat:o});break;case"phone":n+=Ledj.templates.data.phone({phone_num:a[t]});break;case"code":n+=Ledj.templates.data.code({text:a[t]});break;case"tag-array":case"tagarray":Ledj.cache.tagTemplateUsed=!0,n+=Ledj.templates.data.tagArray({tags:a[t]});break;case"string":default:n+=Ledj.templates.data.string({text:a[t]})}return n},Ledj.addTemplate("table",function(e){return'<table class="ledj-table">\n    <thead>\n        <tr>\n        '+Object.keys(Ledj.cache.jsonConfig[e.cacheID].headers).map(function(t){return"\n            <th>"+Ledj.cache.jsonConfig[e.cacheID].headers[t].name+"</th>\n        "}).join("\n")+"\n        </tr>\n    </thead>\n    <tbody>\n    "+(e.objectKey?Ledj.cache.jsonData[e.cacheID][e.objectKey]:Ledj.cache.jsonData[e.cacheID]).map(function(t){return"\n        <tr>\n        "+Object.keys(Ledj.cache.jsonConfig[e.cacheID].headers).map(function(a){return"\n            <td>"+Ledj.getCellContent(Ledj.cache.jsonConfig[e.cacheID].headers[a],a,t)+"</td>\n        "}).join("\n")+"\n        </tr>\n    "}).join("\n")+"\n    </tbody>\n</table>"})},function(e,t,a){"use strict";Ledj.addTemplate("todoList",function(e){return'<div class="ledj-todo-list">\n    <code>#todo</code>\n</div>'})},function(e,t,a){"use strict";Ledj.addDataTemplate("code",function(e){return'<span class="string code"><code>'+e.text+"</code></span>"})},function(e,t,a){"use strict";Ledj.addCacheConfigVar("dateFormat","MM/DD/YYYY"),Ledj.formatDateObj=function(e,t){if(window.moment){var a=moment(e),t=t||Ledj.defaults.dateFormat;return a.format(t)}return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},Ledj.setDataConvertType("date",function(e){if(window.moment)return moment(e);var t=new Date(e);return t.setTime(t.getTime()+60*t.getTimezoneOffset()*1e3),t}),Ledj.addDataTemplate("date",function(e){return'<span class="date">'+Ledj.formatDateObj(e.date,e.dateFormat)+"</span>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("image",function(e){return'<img class="image" src="'+Ledj.getImageUrl(e.src,e.cacheID,e.objectKey)+'"'+(e.alt?' alt="'+e.alt+'" ':"")+"/>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("phone",function(e){return'<span class="phone"><a href="tel:'+e.phone_num+'">'+e.phone_num+"</a></span>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("string",function(e){return'<span class="string">'+e.text+"</span>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("tagArray",function(e){return'<div class="tag-container">\n'+e.tags.map(function(e){return'<span class="tag '+Ledj.nameToID(e)+'">'+e+"</span>"}).join("")+"\n</div>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("url",function(e){return'<a href="'+e.href+'" target="_blank">'+e.text+"</a>"})},function(e,t){}])});