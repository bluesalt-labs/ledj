!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ledj",[],t):"object"==typeof exports?exports.ledj=t():e.ledj=t()}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var o=a[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,a){"use strict";a(1),a(2),a(3),a(4),a(5),a(6),a(7),a(8),a(9),a(10),a(11),a(12)},function(e,t,a){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"undefined"==typeof Ledj?e.Ledj=function(){function t(e,t){m.getJSONConfig(e,function(a,n){null===a&&(n.hasOwnProperty("config")&&n.hasOwnProperty("data")?(m.cache.curCacheID=m.cache.jsonConfig.push(n.config)-1,m.cache.jsonData[m.cache.curCacheID]=n.data,m.cache.jsonUrl[m.cache.curCacheID]=e,t(m.cache.curCacheID)):a="JSON data must have `config` and `data` properties."),null!==a&&console.warn('Config file "'+e+'" could not be retrieved. '+a)})}function a(e,t){e.hasOwnProperty("config")&&e.hasOwnProperty("data")?(m.cache.curCacheID=m.cache.jsonConfig.push(e.config)-1,m.cache.jsonData[m.cache.curCacheID]=e.data,t(m.cache.curCacheID)):console.warn("Config object must have `config` and `data` properties.")}function o(e,t){if(m.cache.jsonData[e])if(Array.isArray(m.cache.jsonData[e]))m.cache.jsonData[e]=m.cache.jsonData[e].sort(m.dataSortCompareHelper);else if("object"===n(m.cache.jsonData[e]))for(var a in m.cache.jsonData[e])m.cache.jsonData[e][a].sort(m.dataSortCompareHelper);else console.warn("Could not sort cache.jsonData["+e+"]");else console.warn("from Ledj.sortJsonDataBy(): `cache.jsonData["+e+"]` does not exist.")}function r(e){o(e)}function c(e,t){var a={cacheID:e,objectKey:t,itemHrefKey:"href",newTab:!0,itemImageKey:"filename",itemTitleKey:"title"};return l(m.templates.linkGrid(a),e,t)}function s(e,t){var a={cacheID:e,objectKey:t};return l(m.templates.table(a),e,t)}function i(e,t){var a={cacheID:e,objectKey:t};return l(m.templates.gifGrid(a),e,t)}function l(e,t,a){return m.templates.parent({title:u(t,a),cacheID:t,childHTML:e})}function d(e,t){var a=document.getElementById(t);if(a){m.cache.elementID[e]=t;var o=null;switch(m.cache.jsonConfig[e].type.toLowerCase()){case"link-grid":case"linkgrid":o=c;break;case"table":o=s;break;case"gif-grid":case"gifgrid":o=i;break;default:console.log("A fallback template is not yet implemented.")}if(o){var r="";if(Array.isArray(m.cache.jsonData[e]))r=o(e);else if("object"===n(m.cache.jsonData[e]))for(var l in m.cache.jsonData[e])r+=o(e,l);else console.warn("Couldn't find a template to use - Ledj shouldn't get here");""!==r&&(a.innerHTML+=r,m.cache.tagTemplateUsed&&(m.removeTagClickListeners(),m.addTagClickListeners()))}else console.warn("A template could not be identified.")}else console.warn("Element "+(t?"#"+t:"[undefined]")+" does not exist.")}function u(e,t){if(t&&""!==t){var a="h2";return m.cache.jsonConfig[e].hasOwnProperty("titleElementLevel")&&"number"==typeof parseInt(m.cache.jsonConfig[e].titleElementLevel)&&(a="h"+m.cache.jsonConfig[e].titleElementLevel),"<"+a+' class="ledj-title">'+t+"</"+a+">"}return null}function f(e){try{document.getElementById(e).innerHTML=""}catch(e){console.warn(e)}}function h(e,t){m.cache.tagTemplateUsed=!1,r(e),d(e,t)}var m={};return m.cache={jsonConfig:[],jsonData:[],jsonUrl:[],elementID:[],curCacheID:-1,tagTemplateUsed:!1},m.defaults={sortDataBy:"title",dateFormat:"mm/dd/yyyy",selectMultipleTags:!0},m.templates={data:{}},m.urlExists=function(e,t,a,n){var o=new XMLHttpRequest;o.open("HEAD",e),o.onreadystatechange=function(){if(this.readyState===this.DONE)if(200===this.status){if(null===t)return 0;t(n)}else{if(null===a)return-1;a(n)}},o.send()},m.reset=function(e){f(m.cache.elementID[e])},m.getJSONConfig=function(e,t){if("string"==typeof e){e+="?dt="+Date.now();var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="json",a.onload=function(){var e=a.status;200===e?t(null,a.response):t(e)},a.send()}else t("[url] must be a string.")},m.getHostName=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")},m.capitalize=function(e){return"string"==typeof e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e},m.nameToID=function(e){return e.replace(/\\s/g,"-").toLowerCase()},m.formatDateString=function(t,a){if(e.moment){var n=moment(t),a=a||m.defaults.dateFormat;return n.format(a)}var o=new Date(t);return o.getMonth()+"/"+o.getDate()+"/"+o.getFullYear()},m.toggleActiveTagsByClassName=function(e){var t=e.target.className.replace("tag","").replace("active","").trim();if(m.defaults.selectMultipleTags){var a=!0,n=!1,o=void 0;try{for(var r,c=document.getElementsByClassName(t)[Symbol.iterator]();!(a=(r=c.next()).done);a=!0){var s=r.value;s.className.includes("active")?s.className="tag "+t:s.className="tag active "+t}}catch(e){n=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(n)throw o}}}else{var i=!0,l=!1,d=void 0;try{for(var u,f=document.getElementsByClassName("tag")[Symbol.iterator]();!(i=(u=f.next()).done);i=!0){var h=u.value,g=h.className.split(" ");g.includes(t)&&!g.includes("active")?h.className="tag active "+t:h.className=h.className.replace("active","").trim()}}catch(e){l=!0,d=e}finally{try{!i&&f.return&&f.return()}finally{if(l)throw d}}}},m.addTagClickListeners=function(){var e=!0,t=!1,a=void 0;try{for(var n,o=document.getElementsByClassName("tag")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.addEventListener("click",m.toggleActiveTagsByClassName)}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}},m.removeTagClickListeners=function(){var e=!0,t=!1,a=void 0;try{for(var n,o=document.getElementsByClassName("tag")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.removeEventListener("click",m.toggleActiveTagsByClassName)}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}},m.getCellContent=function(e,t,a){var n="";switch(e.type.toLowerCase()){case"url":n+=m.templates.data.url({text:a[t],href:a[e.href]});break;case"image":n+=m.templates.data.image({src:a[e.src],alt:a[e.alt]});break;case"date":var o=e.hasOwnProperty("dateFormat")?e.dateFormat:null;n+=m.templates.data.date({date:a[t],dateFormat:o});break;case"tag-array":case"tagarray":m.cache.tagTemplateUsed=!0,n+=m.templates.data.tagArray({tags:a[t]});break;case"string":default:n+=m.templates.data.string({text:a[t]})}return n},m.getImageUrl=function(e,t,a){var n="/",o=m.cache.jsonConfig[t].hasOwnProperty("imgExt")?m.cache.jsonConfig[t].imgExt:"";return m.cache.jsonConfig[t].hasOwnProperty("srcDir")?n=m.cache.jsonConfig[t].srcDir:m.cache.jsonConfig[t].hasOwnProperty("srcDirs")&&(a&&m.cache.jsonConfig[t].srcDirs.hasOwnProperty(a)?n=m.cache.jsonConfig[t].srcDirs[a]:m.cache.jsonConfig[t].srcDirs.hasOwnProperty("Default")?n=m.cache.jsonConfig[t].srcDirs.Default:m.cache.jsonConfig[t].srcDirs.hasOwnProperty("default")&&(n=m.cache.jsonConfig[t].srcDirs.default)),n+e+o},m.addTemplate=function(e,t){m.templates[e]=t},m.addDataTemplate=function(e,t){m.templates.data[e]=t},m.loadAndAttachTo=function(e,a){t(e,function(e){h(e,a)})},m.loadFromObjAndAttachTo=function(e,t){a(e,function(e){r(e),d(e,t)})},m.reloadFromUrlByID=function(e){var t=parseInt(e);"number"==typeof t&&this.cache.jsonUrl[t]&&this.cache.elementID[t]?(this.reset(t),this.loadAndAttachTo(this.cache.jsonUrl[t],this.cache.elementID[t])):console.log("Could not reload: cacheID "+e+" is invalid.")},m.reloadFromObjByID=function(e,t){var a=parseInt(t);"number"==typeof a&&this.cache.elementID[a]?(this.reset(a),this.loadFromObjAndAttachTo(e,this.cache.elementID[a])):console.log("Could not reload: cacheID "+t+" is invalid.")},m.attach=m.loadAndAttachTo,m.attachWith=m.loadFromObjAndAttachTo,m.reload=m.reloadFromUrlByID,m.reloadwith=m.reloadFromObjByID,m}():console.log("Ledj is already defined.")}(window)},function(e,t,a){"use strict";Ledj.addTemplate("gifGrid",function(e){return'<div class="ledj-gif-grid">\n<code>#todo</code>\n</div>'})},function(e,t,a){"use strict";Ledj.addTemplate("linkGrid",function(e){return'<div class="ledj-link-grid">\n'+(e.objectKey?Ledj.cache.jsonData[e.cacheID][e.objectKey]:Ledj.cache.jsonData[e.cacheID]).map(function(t){return'<a class="link-grid-item" href="'+t[e.itemHrefKey]+'"'+(e.newTab?' target="_blank"':"")+'>\n        <img src="'+Ledj.getImageUrl(t[e.itemImageKey],e.cacheID,e.objectKey)+'" title="'+t[e.itemTitleKey]+'" />\n        <span>'+t[e.itemTitleKey]+"</span>\n    </a>"}).join("")+"\n</div>"})},function(e,t,a){"use strict";Ledj.addTemplate("parent",function(e){return'<div class="ledj-container" id="ledj-container-'+e.cacheID+'">\n    '+(e.title?e.title:"")+"\n    "+e.childHTML+"\n</div>"})},function(e,t,a){"use strict";Ledj.addTemplate("table",function(e){return'<table class="ledj-table">\n    <thead>\n        <tr>\n        '+Object.keys(Ledj.cache.jsonConfig[e.cacheID].headers).map(function(t){return"\n            <th>"+Ledj.cache.jsonConfig[e.cacheID].headers[t].name+"</th>\n        "}).join("\n")+"\n        </tr>\n    </thead>\n    <tbody>\n    "+(e.objectKey?Ledj.cache.jsonData[e.cacheID][e.objectKey]:Ledj.cache.jsonData[e.cacheID]).map(function(t){return"\n        <tr>\n        "+Object.keys(Ledj.cache.jsonConfig[e.cacheID].headers).map(function(a){return"\n            <td>"+Ledj.getCellContent(Ledj.cache.jsonConfig[e.cacheID].headers[a],a,t)+"</td>\n        "}).join("\n")+"\n        </tr>\n    "}).join("\n")+"\n    </tbody>\n</table>"})},function(e,t,a){"use strict";Ledj.addTemplate("todoList",function(e){return'<div class="ledj-todo-list">\n    <code>#todo</code>\n</div>'})},function(e,t,a){"use strict";Ledj.addDataTemplate("date",function(e){return'<span class="date">'+Ledj.formatDateString(e.date,e.dateFormat)+"</span>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("image",function(e){return'<img class="image" src="'+Ledj.getImageUrl(e.src,e.cacheID,e.objectKey)+'"'+(e.alt?' alt="'+e.alt+'" ':"")+"/>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("string",function(e){return'<span class="string">'+e.text+"</span>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("tagArray",function(e){return'<div class="tag-container">\n'+e.tags.map(function(e){return'<span class="tag '+Ledj.nameToID(e)+'">'+e+"</span>"}).join("")+"\n</div>"})},function(e,t,a){"use strict";Ledj.addDataTemplate("url",function(e){return'<a href="'+e.href+'" target="_blank">'+e.text+"</a>"})},function(e,t){}])});