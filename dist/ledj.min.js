!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ledj",[],t):"object"==typeof exports?exports.ledj=t():e.ledj=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var c=n[a]={i:a,l:!1,exports:{}};return e[a].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var c=n(1),r=(a(c),n(2)),o=(a(r),n(3)),s=(a(o),n(4)),i=(a(s),n(5)),l=(a(i),n(6)),d=(a(l),n(7)),f=(a(d),n(8)),u=(a(f),n(9)),h=(a(u),n(10));a(h)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"undefined"==typeof Ledj?e.Ledj=function(){function t(e,t){m.getJSONConfig(e,function(n,a){null===n&&(a.hasOwnProperty("config")&&a.hasOwnProperty("data")?(m.cache.curCacheID=m.cache.jsonConfig.push(a.config)-1,m.cache.jsonData[m.cache.curCacheID]=a.data,m.cache.jsonUrl[m.cache.curCacheID]=e,t(m.cache.curCacheID)):n="JSON data must have `config` and `data` properties."),null!==n&&console.warn('Config file "'+e+'" could not be retrieved. '+n)})}function n(e,t){e.hasOwnProperty("config")&&e.hasOwnProperty("data")?(m.cache.curCacheID=m.cache.jsonConfig.push(e.config)-1,m.cache.jsonData[m.cache.curCacheID]=e.data,t(m.cache.curCacheID)):console.warn("Config object must have `config` and `data` properties.")}function c(e,t){if(m.cache.jsonData[e])if(Array.isArray(m.cache.jsonData[e]))m.cache.jsonData[e]=_.sortBy(m.cache.jsonData[e],"string"==typeof t?t.toLowerCase():t);else if("object"===a(m.cache.jsonData[e]))for(var n in m.cache.jsonData[e])m.cache.jsonData[e][n]=_.sortBy(m.cache.jsonData[e][n],"string"==typeof t?t.toLowerCase():t);else console.warn("Could not sort cache.jsonData["+e+"]");else console.warn("from Ledj.sortJsonDataBy(): `cache.jsonData["+e+"]` does not exist.")}function r(e){c(e,m.defaults.sortDataBy)}function o(e,t){var n={cacheID:e,objectKey:t,itemHrefKey:"href",newTab:!0,itemImageKey:"filename",itemTitleKey:"title"};return l(m.templates.linkGrid(n),e,t)}function s(e,t){var n={cacheID:e,objectKey:t};return l(m.templates.table(n),e,t)}function i(e,t){var n={cacheID:e,objectKey:t};return l(m.templates.gifGrid(n),e,t)}function l(e,t,n){return m.templates.parent({title:f(t,n),cacheID:t,childHTML:e})}function d(e,t){var n=document.getElementById(t);if(n){m.cache.elementID[e]=t;var c=null;switch(m.cache.jsonConfig[e].type.toLowerCase()){case"link-grid":case"linkgrid":c=o;break;case"table":c=s;break;case"gif-grid":case"gifgrid":c=i;break;default:console.log("A fallback template is not yet implemented.")}if(c){var r="";if(Array.isArray(m.cache.jsonData[e]))r=c(e);else if("object"===a(m.cache.jsonData[e]))for(var l in m.cache.jsonData[e])r+=c(e,l);else console.warn("Couldn't find a template to use - Ledj shouldn't get here");""!==r&&(n.innerHTML+=r,m.cache.tagTemplateUsed&&(m.removeTagClickListeners(),m.addTagClickListeners()))}else console.warn("A template could not be identified.")}else console.warn("Element "+(t?"#"+t:"[undefined]")+" does not exist.")}function f(e,t){if(t&&""!==t){var n="h2";return m.cache.jsonConfig[e].hasOwnProperty("titleElementLevel")&&"number"==typeof parseInt(m.cache.jsonConfig[e].titleElementLevel)&&(n="h"+m.cache.jsonConfig[e].titleElementLevel),"<"+n+' class="ledj-title">'+t+"</"+n+">"}return null}function u(e){try{document.getElementById(e).innerHTML=""}catch(e){console.warn(e)}}function h(e,t){m.cache.tagTemplateUsed=!1,r(e),d(e,t)}var m={};return m.cache={jsonConfig:[],jsonData:[],jsonUrl:[],elementID:[],curCacheID:-1,tagTemplateUsed:!1},m.defaults={sortDataBy:"title",dateFormat:"mm/dd/yyyy",selectMultipleTags:!0},m.templates={data:{}},m.urlExists=function(e,t,n,a){var c=new XMLHttpRequest;c.open("HEAD",e),c.onreadystatechange=function(){if(this.readyState===this.DONE)if(200===this.status){if(null===t)return 0;t(a)}else{if(null===n)return-1;n(a)}},c.send()},m.reset=function(e){u(m.cache.elementID[e])},m.getJSONConfig=function(e,t){if("string"==typeof e){e+="?dt="+Date.now();var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="json",n.onload=function(){var e=n.status;200===e?t(null,n.response):t(e)},n.send()}else t("[url] must be a string.")},m.getHostName=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")},m.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},m.nameToID=function(e){return e.replace(/\\s/g,"-").toLowerCase()},m.formatDateString=function(t,n){if(e.moment){var a=moment(t),n=n||m.defaults.dateFormat;return a.format(n)}var c=new Date(t);return c.getMonth()+"/"+c.getDate()+"/"+c.getFullYear()},m.toggleActiveTagsByClassName=function(e){var t=e.target.className.replace("tag","").replace("active","").trim();m.defaults.selectMultipleTags?_.map(document.getElementsByClassName(t),function(e){e.className.includes("active")?e.className="tag "+t:e.className="tag active "+t}):_.map(document.getElementsByClassName("tag"),function(e){var n=e.className.split(" ");n.includes(t)&&!n.includes("active")?e.className="tag active "+t:e.className=e.className.replace("active","").trim()})},m.addTagClickListeners=function(){_.map(document.getElementsByClassName("tag"),function(e){e.addEventListener("click",m.toggleActiveTagsByClassName)})},m.removeTagClickListeners=function(){_.map(document.getElementsByClassName("tag"),function(e){e.removeEventListener("click",m.toggleActiveTagsByClassName)})},m.getCellContent=function(e,t,n){var a="";switch(e.type.toLowerCase()){case"url":a+=m.templates.data.url({text:n[t],href:n[e.href]});break;case"image":a+=m.templates.data.image({src:n[e.src],alt:n[e.alt]});break;case"date":var c=e.hasOwnProperty("dateFormat")?e.dateFormat:null;a+=m.templates.data.date({date:n[t],dateFormat:c});break;case"tag-array":case"tagarray":m.cache.tagTemplateUsed=!0,a+=m.templates.data.tagArray({tags:n[t]});break;case"string":default:a+=m.templates.data.string({text:n[t]})}return a},m.getImageUrl=function(e,t,n){var a="/",c=m.cache.jsonConfig[t].hasOwnProperty("imgExt")?m.cache.jsonConfig[t].imgExt:"";return m.cache.jsonConfig[t].hasOwnProperty("srcDir")?a=m.cache.jsonConfig[t].srcDir:m.cache.jsonConfig[t].hasOwnProperty("srcDirs")&&(n&&m.cache.jsonConfig[t].srcDirs.hasOwnProperty(n)?a=m.cache.jsonConfig[t].srcDirs[n]:m.cache.jsonConfig[t].srcDirs.hasOwnProperty("Default")?a=m.cache.jsonConfig[t].srcDirs.Default:m.cache.jsonConfig[t].srcDirs.hasOwnProperty("default")&&(a=m.cache.jsonConfig[t].srcDirs.default)),a+e+c},m.loadAndAttachTo=function(e,n){t(e,function(e){h(e,n)})},m.loadFromObjAndAttachTo=function(e,t){n(e,function(e){r(e),d(e,t)})},m.reloadFromUrlByID=function(e){var t=parseInt(e);"number"==typeof t&&this.cache.jsonUrl[t]&&this.cache.elementID[t]?(this.reset(t),this.loadAndAttachTo(this.cache.jsonUrl[t],this.cache.elementID[t])):console.log("Could not reload: cacheID "+e+" is invalid.")},m.reloadFromObjByID=function(e,t){var n=parseInt(t);"number"==typeof n&&this.cache.elementID[n]?(this.reset(n),this.loadFromObjAndAttachTo(e,this.cache.elementID[n])):console.log("Could not reload: cacheID "+t+" is invalid.")},m.attach=m.loadAndAttachTo,m.attachWith=m.loadFromObjAndAttachTo,m.reload=m.reloadFromUrlByID,m.reloadwith=m.reloadFromObjByID,m}():console.log("Ledj is already defined.")}(window)},function(e,t,n){"use strict";var a=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n<div class="ledj-container" id="ledj-container-','">\n    ',"\n    ","\n</div>\n"],['\n<div class="ledj-container" id="ledj-container-','">\n    ',"\n    ","\n</div>\n"]);Ledj.templates.parent=html(a,cacheID,title||"",childHTML)},function(e,t,n){"use strict";function a(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var c=a(['\n<div class="ledj-link-grid">\n',"\n</div>\n"],['\n<div class="ledj-link-grid">\n',"\n</div>\n"]),r=a(['\n    <a class="link-grid-item" href="','"','\n        <img src="','" title="','" />\n        <span>',"</span>\n    </a>\n"],['\n    <a class="link-grid-item" href="','"','\n        <img src="','" title="','" />\n        <span>',"</span>\n    </a>\n"]);Ledj.templates.linkGrid=html(c,(objectKey?Ledj.cache.jsonData[cacheID][objectKey]:Ledj.cache.jsonData[cacheID]).map(function(e){return html(r,e[itemHrefKey],newTab?' target="_blank"':"",Ledj.getImageUrl(e[itemImageKey],cacheID,objectKey),e[itemTitleKey],e[itemTitleKey])}))},function(e,t,n){"use strict";function a(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var c=a(['\n<table class="ledj-table">\n    <thead>\n        <tr>\n        ',"\n        </tr>\n    </thead>\n    <tbody>\n    ","\n    </tbody>\n</table>\n"],['\n<table class="ledj-table">\n    <thead>\n        <tr>\n        ',"\n        </tr>\n    </thead>\n    <tbody>\n    ","\n    </tbody>\n</table>\n"]),r=a(["\n            <th>","</th>\n        "],["\n            <th>","</th>\n        "]),o=a(["\n        <tr>\n        ","\n        </tr>\n    "],["\n        <tr>\n        ","\n        </tr>\n    "]),s=a(["\n            <td>","</td>\n        "],["\n            <td>","</td>\n        "]);Ledj.templates.table=html(c,Ledj.cache.jsonConfig[cacheID].headers.map(function(e){return html(r,e.name)}),(objectKey?Ledj.cache.jsonData[cacheID][objectKey]:Ledj.cache.jsonData[cacheID]).map(function(e){return html(o,Ledj.cache.jsonConfig[cacheID].headers.map(function(t,n){return html(s,Ledj.getCellContent(t,n,e))}))}))},function(e,t,n){"use strict";var a=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n<div class="ledj-gif-grid">\n    <code>#todo</code>\n</div>\n'],['\n<div class="ledj-gif-grid">\n    <code>#todo</code>\n</div>\n']);Ledj.templates.gifGrid=html(a)},function(e,t,n){"use strict";var a=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n<div class="ledj-todo-list">\n    <code>#todo</code>\n</div>\n'],['\n<div class="ledj-todo-list">\n    <code>#todo</code>\n</div>\n']);Ledj.templates.todoList=html(a)},function(e,t,n){"use strict";var a=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n<span class="string">',"</span>\n"],['\n<span class="string">',"</span>\n"]);Ledj.templates.data.string=html(a,text)},function(e,t,n){"use strict";var a=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n<a href="','" target="_blank">',"</a>\n"],['\n<a href="','" target="_blank">',"</a>\n"]);Ledj.templates.data.url=html(a,href,text)},function(e,t,n){"use strict";var a=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['  \n<img class="image" src="','"'," />\n"],['  \n<img class="image" src="','"'," />\n"]);Ledj.templates.data.image=html(a,Ledj.getImageUrl(src,cacheID,objectKey),alt?' alt="'+alt+'"':"")},function(e,t){}])});